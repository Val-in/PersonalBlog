@{
    ViewData["Title"] = "Пользователи";
    Layout = "_Layout";
}

<h2>Все пользователи</h2>

<div id="usersContainer" class="row"></div>

<script>
async function loadUsers() {
    const res = await fetch("/api/UserApi");
    const users = await res.json();
    const container = document.getElementById("usersContainer");
    container.innerHTML = "";

    users.forEach(u => {
        const roles = u.roles.map(r => `<span class="badge badge-info mr-1">${r}</span>`).join("");
        container.innerHTML += `
            <div class="col-md-3 mb-3">
                <div class="card p-2">
                    <h5>${u.nickname}</h5>
                    <p>${u.login}</p>
                    ${roles}
                    <a class="btn btn-sm btn-primary mt-2" href="/UserView/Edit/${u.id}">Редактировать</a>
                </div>
            </div>
        `;
    });
}
loadUsers();
</script>